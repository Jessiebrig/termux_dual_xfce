#!/bin/bash

# Color codes
GREEN='\033[0;32m'
CYAN='\033[0;36m'
YELLOW='\033[1;33m'
NC='\033[0m'

while true; do
    clear
    echo ""
    echo "┌────────────────────────────────────────┐"
    echo "│       Termux XFCE Quick Launch         │"
    echo "└────────────────────────────────────────┘"
    echo ""
    echo -e "${CYAN}Desktop Environments:${NC}"
    echo -e "  ${GREEN}1${NC} - Start Native Termux XFCE"
    echo "      Launch XFCE desktop in Termux-X11"
    echo ""
    echo -e "  ${GREEN}2${NC} - Start Debian XFCE"
    echo "      Launch XFCE desktop in Debian proot"
    echo ""
    echo -e "  ${GREEN}3${NC} - Start Debian CLI"
    echo "      Enter Debian proot terminal"
    echo ""
    echo -e "${CYAN}Utilities:${NC}"
    echo -e "  ${GREEN}4${NC} - prun <command>"
    echo "      Run Debian commands from Termux"
    echo ""
    echo -e "  ${GREEN}5${NC} - zrun <command>"
    echo "      Run with hardware acceleration"
    echo ""
    echo -e "  ${GREEN}6${NC} - zrunhud <command>"
    echo "      Run with HW accel + FPS display"
    echo ""
    echo -e "  ${GREEN}7${NC} - cp2menu"
    echo "      Copy Debian apps to Termux menu"
    echo ""
    echo -e "  ${GREEN}8${NC} - Kill Termux-X11"
    echo "      Stop all X11 sessions"
    echo ""
    echo -e "  ${YELLOW}0${NC} - Exit"
    echo ""
    echo -n "Select option [0-8]: " > /dev/tty
    read choice < /dev/tty
    
    case $choice in
        1)
            echo ""
            echo -e "${GREEN}Starting Native Termux XFCE...${NC}"
            start_xfce
            exit 0
            ;;
        2)
            echo ""
            echo -e "${GREEN}Starting Debian XFCE...${NC}"
            start_debian_xfce
            exit 0
            ;;
        3)
            echo ""
            echo -e "${GREEN}Entering Debian CLI...${NC}"
            start_debian
            exit 0
            ;;
        4)
            echo ""
            echo -n "Enter command to run: " > /dev/tty
            read cmd < /dev/tty
            if [[ -n "$cmd" ]]; then
                prun $cmd
            fi
            echo -n "Press Enter to continue..." > /dev/tty
            read < /dev/tty
            ;;
        5)
            echo ""
            echo -n "Enter command to run: " > /dev/tty
            read cmd < /dev/tty
            if [[ -n "$cmd" ]]; then
                zrun $cmd
            fi
            echo -n "Press Enter to continue..." > /dev/tty
            read < /dev/tty
            ;;
        6)
            echo ""
            echo -n "Enter command to run: " > /dev/tty
            read cmd < /dev/tty
            if [[ -n "$cmd" ]]; then
                zrunhud $cmd
            fi
            echo -n "Press Enter to continue..." > /dev/tty
            read < /dev/tty
            ;;
        7)
            echo ""
            cp2menu
            echo -n "Press Enter to continue..." > /dev/tty
            read < /dev/tty
            ;;
        8)
            echo ""
            echo -e "${YELLOW}Killing Termux-X11...${NC}"
            kill_termux_x11
            echo "Done."
            echo -n "Press Enter to continue..." > /dev/tty
            read < /dev/tty
            ;;
        0)
            echo ""
            echo "Goodbye!"
            exit 0
            ;;
        *)
            echo ""
            echo -e "${YELLOW}Invalid option. Please try again.${NC}"
            sleep 1
            ;;
    esac
done
